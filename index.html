<script>
    async function generateDesign() {
        const inputBox = document.querySelector(".input-box");
        const outputContainer = document.getElementById("content");

        const userInput = inputBox.value.trim();
        if (!userInput) {
            alert("대지 조건을 입력하세요!");
            return;
        }

        outputContainer.innerHTML = "<h3>AI 분석 중...</h3>";

        const apiKey = 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 // 🔴 OpenAI API 키 (보안상 백엔드에서 처리 추천)

        try {
            const response = await fetch("https://api.openai.com/v1/chat/completions", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: "gpt-4",
                    messages: [
                        { "role": "system", "content": "당신은 건축 설계 전문가입니다. 사용자의 요구 사항에 맞춰 설계 방향을 제안하세요." },
                        { "role": "user", "content": userInput }
                    ]
                })
            });

            const data = await response.json();
            outputContainer.innerHTML = `<h3>🖥️ AI 설계 결과</h3><p>${data.choices[0].message.content}</p>`;
        } catch (error) {
            outputContainer.innerHTML = "<h3>⚠️ 오류 발생!</h3>";
        }
    }

    function navigateTo(section) {
        let content = "";
        if (section === "홈") {
            content = "<h2>🏡 BuildSmart에 오신 것을 환영합니다!</h2><p>건축 설계와 법규 분석을 AI로 쉽게 해결하세요.</p>";
        } else if (section === "AI 설계") {
            content = `<h2>🖥️ AI 설계</h2>
                <textarea class="input-box" rows="4" placeholder="대지 조건을 입력하세요..."></textarea>
                <button class="submit-btn" onclick="generateDesign()">🔎 설계 요청</button>
                <div id="content"></div>`;
        } else if (section === "법규 분석") {
            content = '<h2>⚖️ 법규 분석</h2><p>건축 법규를 확인하고 요약해드립니다.</p>';
            content += '<button class="submit-btn">📜 법규 조회</button>';
        } else if (section === "3D 모델") {
            content = '<h2>🏗️ 3D 모델 생성</h2><p>입력된 정보로 3D 건축 모델을 생성합니다.</p>';
            content += '<button class="submit-btn">🎨 모델 생성</button>';
        } else if (section === "마이 페이지") {
            content = '<h2>👤 마이 페이지</h2><p>내가 요청한 설계 및 법규 분석 내역을 확인하세요.</p>';
        }
        document.getElementById("content").innerHTML = content;
    }
</script>
